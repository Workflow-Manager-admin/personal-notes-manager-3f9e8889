{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for initializing, connecting, closing, and executing queries on a SQLite database used in a notes management backend. It defines schema creation for 'users' and 'notes' tables, manages a singleton database connection, and exposes methods to run queries and fetch data.", "external_files": ["path", "sqlite3"], "external_methods": ["require('sqlite3').verbose()"], "published": ["initializeDatabase", "getDb", "closeDb", "runQuery", "fetchOne", "fetchAll"], "classes": [], "methods": [{"name": "initializeDatabase()", "description": "Initializes and connects to the SQLite database, creating 'users' and 'notes' tables if they do not exist.", "scope": "", "scopeKind": ""}, {"name": "getDb()", "description": "Returns a singleton database connection, initializing it if necessary.", "scope": "", "scopeKind": ""}, {"name": "closeDb()", "description": "Closes the database connection gracefully.", "scope": "", "scopeKind": ""}, {"name": "runQuery(sql, params = [])", "description": "Executes an INSERT, UPDATE, or DELETE SQL statement, returning a promise that resolves with the result's last inserted ID and number of changes.", "scope": "", "scopeKind": ""}, {"name": "fetchOne(sql, params = [])", "description": "Fetches a single row based on the provided SQL query and parameters.", "scope": "", "scopeKind": ""}, {"name": "fetchAll(sql, params = [])", "description": "Fetches all rows resulting from the given SQL query and parameters.", "scope": "", "scopeKind": ""}, {"name": "AnonymousFunction64663d270100(err)", "scope": "runQuery", "scopeKind": "function", "description": "unavailable"}], "calls": ["getDb().run", "getDb().get", "getDb().all"], "search-terms": ["database initialization", "SQLite", "schema creation", "notes table schema", "users table schema", "connection singleton", "runQuery"], "state": 2, "file_id": 13, "knowledge_revision": 27, "git_revision": "", "ctags": [{"_type": "tag", "name": "AnonymousFunction64663d270100", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^    getDb().run(sql, params, function (err) {$/", "language": "JavaScript", "kind": "function", "signature": "(err)", "scope": "runQuery", "scopeKind": "function"}, {"_type": "tag", "name": "DB_PATH", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^const DB_PATH = process.env.NOTES_DB_PATH || path.join(__dirname, '..\\/..\\/notes.sqlite3');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "closeDb", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^function closeDb() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^let db;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "fetchAll", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^function fetchAll(sql, params = []) {$/", "language": "JavaScript", "kind": "function", "signature": "(sql, params = [])"}, {"_type": "tag", "name": "fetchOne", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^function fetchOne(sql, params = []) {$/", "language": "JavaScript", "kind": "function", "signature": "(sql, params = [])"}, {"_type": "tag", "name": "getDb", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^function getDb() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "initializeDatabase", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^  initializeDatabase,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "initializeDatabase", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^function initializeDatabase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "runQuery", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^function runQuery(sql, params = []) {$/", "language": "JavaScript", "kind": "function", "signature": "(sql, params = [])"}, {"_type": "tag", "name": "sqlite3", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-3f9e8889/notes_backend/src/services/database.js", "pattern": "/^const sqlite3 = require('sqlite3').verbose();$/", "language": "JavaScript", "kind": "constant"}], "hash": "a1584aa7826e9f7ec89d9ac67cb64f06", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/services/database.js", "fields": [{"name": "let db;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "initializeDatabase,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"27": ""}]}